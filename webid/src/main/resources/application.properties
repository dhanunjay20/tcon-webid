spring.application.name=bidding
# MongoDB - read from SPRING_DATA_MONGODB_URI or fallback to localhost for dev
spring.data.mongodb.uri=${SPRING_DATA_MONGODB_URI:mongodb+srv://tcon-bidding:tcon-bidding123@tcon-bidding.eewdugi.mongodb.net/?appName=tcon-bidding&retryWrites=true&w=majority}
spring.data.mongodb.database=${SPRING_DATA_MONGODB_DATABASE:BiddingDB}
spring.data.mongodb.auto-index-creation=true

# MongoDB connection settings
SPRING_DATA_MONGODB_SERVER_SELECTION_TIMEOUT_MS=15000
SPRING_DATA_MONGODB_SOCKET_CONNECT_TIMEOUT_MS=15000
app.mongodb.failOnStartup=false
app.mongodb.pingOnStartup=false

# Mail configuration - read from env vars (set SPRING_MAIL_* in .env)
spring.mail.host=${SPRING_MAIL_HOST:}
spring.mail.port=${SPRING_MAIL_PORT:0}
spring.mail.username=${SPRING_MAIL_USERNAME:}
spring.mail.password=${SPRING_MAIL_PASSWORD:}
spring.mail.protocol=${SPRING_MAIL_PROTOCOL:smtp}
spring.mail.properties.mail.smtp.auth=${SPRING_MAIL_PROPERTIES_MAIL_SMTP_AUTH:true}
spring.mail.properties.mail.smtp.starttls.enable=${SPRING_MAIL_PROPERTIES_MAIL_SMTP_STARTTLS_ENABLE:true}
spring.mail.properties.mail.smtp.ssl.enable=${SPRING_MAIL_PROPERTIES_MAIL_SMTP_SSL_ENABLE:false}
spring.mail.properties.mail.debug=${SPRING_MAIL_PROPERTIES_MAIL_DEBUG:false}

# Twilio properties (optional) - use TWILIO_ACCOUNT_SID etc. set in .env
twilio.accountSid=${TWILIO_ACCOUNT_SID:}
twilio.authToken=${TWILIO_AUTH_TOKEN:}
twilio.apiKeySid=${TWILIO_API_KEY_SID:}
twilio.apiKeySecret=${TWILIO_API_KEY_SECRET:}
twilio.whatsappFrom=${TWILIO_WHATSAPP_FROM:}

# JWT secret and expiration
jwt.secret=${JWT_SECRET:}
jwt.expirationMs=${JWT_EXPIRATION_MS:3600000}

# OTP configuration
otp.expiration.minutes=${OTP_EXPIRATION_MINUTES:5}
otp.max.attempts=${OTP_MAX_ATTEMPTS:3}

# Server configuration
server.port=${PORT:8080}
server.address=0.0.0.0
server.compression.enabled=true
server.compression.mime-types=text/html,text/xml,text/plain,text/css,text/javascript,application/javascript,application/json
server.compression.min-response-size=1024
server.error.include-message=never
server.error.include-stacktrace=never

# Logging
logging.level.root=INFO
logging.level.com.tcon.webid=INFO
logging.pattern.console=%d{yyyy-MM-dd HH:mm:ss} - %msg%n

# Actuator endpoints for health checks
management.endpoints.web.exposure.include=health,info,metrics
management.endpoint.health.show-details=when-authorized

# Request size limits
spring.servlet.multipart.max-file-size=10MB
spring.servlet.multipart.max-request-size=10MB

# Connection pool configuration
spring.data.mongodb.connection-pool.max-size=100
spring.data.mongodb.connection-pool.min-size=10
spring.data.mongodb.connection-pool.max-connection-life-time=0
spring.data.mongodb.connection-pool.max-connection-idle-time=60000
